<ng-container *transloco="let t; prefix: 'manga-format-stats'">
  <div class="card stats-card p-4">

    @if (chartData().length > 0) {
      <div class="row g-3">
        <!-- Chart - always visible -->
        <div class="col-12 col-md-6 col-lg-5">
          <app-pie-chart
            [data]="chartData()"
            [valueTransformer]="formatTransformer"
          />
        </div>

        <!-- Table - hidden on mobile -->
        <div class="col-md-6 col-lg-7 d-none d-md-block">
          <app-responsive-table [rows]="chartData()" [trackByFn]="trackByIdentity">
            <ngx-datatable
              class="bootstrap"
              [rows]="chartData()"
              [columnMode]="'force'"
              rowHeight="auto"
              [headerHeight]="40"

            >
              <ngx-datatable-column prop="value" [sortable]="true" [draggable]="false" [resizeable]="false">
                <ng-template ngx-datatable-header-template>
                  {{t('format-header')}}
                </ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>
                  {{value | mangaFormat}}
                </ng-template>
              </ngx-datatable-column>

              <ngx-datatable-column prop="count" [sortable]="true" [draggable]="false" [resizeable]="false">
                <ng-template ngx-datatable-header-template>
                  <span class="d-block text-end">{{t('count-header')}}</span>
                </ng-template>
                <ng-template let-value="value" ngx-datatable-cell-template>
                  <span class="d-block text-end">{{value | compactNumber}}</span>
                </ng-template>
              </ngx-datatable-column>
            </ngx-datatable>
          </app-responsive-table>
        </div>
      </div>
    } @else {
      <p class="text-muted">{{t('no-data', {fallback: 'No format data available'})}}</p>
    }
  </div>
</ng-container>
